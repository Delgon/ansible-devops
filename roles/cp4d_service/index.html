<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/roles/cp4d_service/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>cp4d_service - MAS Devops Collection</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "cp4d_service";
        var mkdocs_page_input_path = "roles/cp4d_service.md";
        var mkdocs_page_url = "/ansible-devops/roles/cp4d_service/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS Devops Collection
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../changes/">Changes</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/ocp/">OCP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-core/">Install Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-manage/">Add Manage</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: OCP Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_deprovision/">ocp_deprovision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_disable_updates/">ocp_disable_updates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_github_oauth/">ocp_github_oauth</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_login/">ocp_login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_provision/">ocp_provision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_roks_upgrade_registry_storage/">ocp_roks_upgrade_registry_storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_upgrade/">ocp_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_verify/">ocp_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Dependency Mgmt</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../appconnect/">appconnect</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cert_manager/">cert_manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cert_manager_upgrade/">cert_manager_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cert_manager_upgrade_check/">cert_manager_upgrade_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cluster_monitoring/">cluster_monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cos/">cos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_hack_worker_nodes/">cp4d_hack_worker_nodes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d/">cp4d</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">cp4d_service</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#services-supported">Services Supported</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-installation">Role Variables - Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_service_name">cpd_service_name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_service_storage_class">cpd_service_storage_class</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_instance_namespace">cpd_instance_namespace</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_operator_namespace">cpd_operator_namespace</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-watson-studio">Role Variables - Watson Studio</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_wsl_project_id">cpd_wsl_project_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_wsl_project_name">cpd_wsl_project_name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_wsl_project_description">cpd_wsl_project_description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-mas-configuration-generation">Role Variables - MAS Configuration Generation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mas_instance_id">mas_instance_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#mas_config_dir">mas_config_dir</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-playbook">Example Playbook</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#license">License</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#content-from-cp4d_wds-role-that-needs-to-be-merged-into-here">Content from cp4d_wds role that needs to be merged into here</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_upgrade/">cp4d_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2/">db2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2_backup/">db2_backup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2_restore/">db2_restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../kafka/">kafka</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nvidia_gpu/">nvidia_gpu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mongodb/">mongodb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocs/">ocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sbo/">sbo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sbo_upgrade/">sbo_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sls/">sls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uds/">uds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Suite Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_config/">suite_app_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_install/">suite_app_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_config/">suite_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_db2_setup_for_manage/">suite_db2_setup_for_manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_dns/">suite_dns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_install/">suite_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_mustgather/">suite_mustgather</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_mustgather_download/">suite_mustgather_download</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_upgrade/">suite_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_upgrade_check/">suite_upgrade_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_verify/">suite_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ansible_version_check/">ansible_version_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_jdbc/">gencfg_jdbc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_workspace/">gencfg_workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_operator/">install_operator</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS Devops Collection</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Roles: Dependency Mgmt &raquo;</li><li>cp4d_service</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/roles/cp4d_service.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="cp4d_service">cp4d_service<a class="headerlink" href="#cp4d_service" title="Permanent link"></a></h1>
<p>Install a chosen CloudPak for Data service.</p>
<h2 id="services-supported">Services Supported<a class="headerlink" href="#services-supported" title="Permanent link"></a></h2>
<p>These services can be deployed and configured using this role:</p>
<ul>
<li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=services-watson-studio">Watson Studio</a> required by <a href="https://www.ibm.com/docs/en/mas87/8.7.0?topic=applications-maximo-predict">Predict</a> and <a href="https://www.ibm.com/docs/en/mas87/8.7.0?topic=solutions-maximo-health-predict-utilities">Health &amp; Predict Utilities</a></li>
<li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=services-watson-machine-learning">Watson Machine Learning</a> required by <a href="https://www.ibm.com/docs/en/mas87/8.7.0?topic=applications-maximo-predict">Predict</a></li>
<li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=services-analytics">Analytics Service (Apache Spark)</a> required by <a href="https://www.ibm.com/docs/en/mas87/8.7.0?topic=applications-maximo-predict">Predict</a></li>
<li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=services-watson-openscale">Watson OpenScale</a> an optional dependency for <a href="https://www.ibm.com/docs/en/mas87/8.7.0?topic=applications-maximo-predict">Predict</a></li>
<li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=services-watson-discovery">Watson Discovery</a> required by Assist</li>
<li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=services-decision-optimization">Decision Optimization</a> an optional dependency for <a href="https://www.ibm.com/docs/en/mas87/8.7.0?topic=ons-maximo-scheduler-optimization">Maximo Scheduler Optimization</a> - Requires Watson Studio and Watson Machine Learning.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Application Support</p>
<p>For more information on how Predict and HP Utilities make use of Watson Studio, refer to <a href="https://www.ibm.com/docs/en/mhmpmh-and-p-u/8.2.0?topic=started-getting-data-scientists">Predict/HP Utilities documentation</a></p>
</div>
<h2 id="role-variables-installation">Role Variables - Installation<a class="headerlink" href="#role-variables-installation" title="Permanent link"></a></h2>
<h3 id="cpd_service_name">cpd_service_name<a class="headerlink" href="#cpd_service_name" title="Permanent link"></a></h3>
<p>Name of the service to install, supported values are: <code>wsl</code></p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>CPD_SERVICE_NAME</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="cpd_service_storage_class">cpd_service_storage_class<a class="headerlink" href="#cpd_service_storage_class" title="Permanent link"></a></h3>
<p>This is used to set <code>spec.storageClass</code> in all CPD v3.5 services, and many - but not all - CP4D v4.0 services.</p>
<ul>
<li><strong>Required</strong>, unless IBMCloud storage classes are available.</li>
<li>Environment Variable: <code>CPD_SERVICE_STORAGE_CLASS</code></li>
<li>Default Value: <code>ibmc-file-gold-gid</code> if the storage class is available.</li>
</ul>
<h3 id="cpd_instance_namespace">cpd_instance_namespace<a class="headerlink" href="#cpd_instance_namespace" title="Permanent link"></a></h3>
<p>Namespace where the CP4D instance is deployed.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_INSTANCE_NAMESPACE</code></li>
<li>Default Value: <code>ibm-cpd</code></li>
</ul>
<h3 id="cpd_operator_namespace">cpd_operator_namespace<a class="headerlink" href="#cpd_operator_namespace" title="Permanent link"></a></h3>
<p>Namespace where the CP4D instance is deployed.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_OPERATORS_NAMESPACE</code></li>
<li>Default Value: <code>ibm-cpd-operators</code></li>
</ul>
<h2 id="role-variables-watson-studio">Role Variables - Watson Studio<a class="headerlink" href="#role-variables-watson-studio" title="Permanent link"></a></h2>
<h3 id="cpd_wsl_project_id">cpd_wsl_project_id<a class="headerlink" href="#cpd_wsl_project_id" title="Permanent link"></a></h3>
<p>Stores the CP4D Watson Studio Project ID that can be used to configure HP Utilities application in MAS.  If this property is not set, or the project identified by this ID does not already exist this role will automatically create one Watson Studio project.  <strong>TODO: This needs to be fixed we need to key off the PROJECT_NAME to make this idempotent, user can't be expected to know the project ID upfront!</strong></p>
<ul>
<li>Optional, only supported when <code>cpd_service_name</code> = <code>wsl</code></li>
<li>Environment Variable: <code>CPD_WSL_PROJECT_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="cpd_wsl_project_name">cpd_wsl_project_name<a class="headerlink" href="#cpd_wsl_project_name" title="Permanent link"></a></h3>
<p>Stores the CP4D Watson Studio Project name that can be used to configure HP Utilities application in MAS.</p>
<ul>
<li>Optional, only supported when <code>cpd_service_name</code> = <code>wsl</code></li>
<li>Environment Variable: <code>CPD_WSL_PROJECT_NAME</code></li>
<li>Default Value: <code>wsl_default_project</code></li>
</ul>
<h3 id="cpd_wsl_project_description">cpd_wsl_project_description<a class="headerlink" href="#cpd_wsl_project_description" title="Permanent link"></a></h3>
<p>Optional - Stores the CP4D Watson Studio Project description that can be used to configure HP Utilities application in MAS.</p>
<ul>
<li>Optional, only supported when <code>cpd_service_name</code> = <code>wsl</code></li>
<li>Environment Variable: <code>CPD_WSL_PROJECT_DESCRIPTION</code></li>
<li>Default Value: <code>Watson Studio Project for Maximo Application Suite</code></li>
</ul>
<h2 id="role-variables-mas-configuration-generation">Role Variables - MAS Configuration Generation<a class="headerlink" href="#role-variables-mas-configuration-generation" title="Permanent link"></a></h2>
<h3 id="mas_instance_id">mas_instance_id<a class="headerlink" href="#mas_instance_id" title="Permanent link"></a></h3>
<p>The instance ID of Maximo Application Suite that a generated configuration will target.  If this or <code>mas_config_dir</code> are not set then the role will not generate a resource template.</p>
<ul>
<li>Optional, only supported when <code>cpd_service_name</code> = <code>wsl</code></li>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_config_dir">mas_config_dir<a class="headerlink" href="#mas_config_dir" title="Permanent link"></a></h3>
<p>Local directory to save the generated resource definition.  This can be used to manually configure a MAS instance, or used as an input to the <a href="../suite_config/">suite_config</a> role. If this or <code>mas_instance_id</code> are not set then the role will not generate a resource template.</p>
<ul>
<li>Optional, only supported when <code>cpd_service_name</code> = <code>wsl</code></li>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link"></a></h2>
<pre><code class="language-yaml">---
- hosts: localhost
  any_errors_fatal: true
  vars:
    cpd_service_storage_class: ibmc-file-gold-gid
    cpd_service_name: wsl
  roles:
    - ibm.mas_devops.cp4d_service

</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link"></a></h2>
<p>EPL-2.0</p>
<h2 id="content-from-cp4d_wds-role-that-needs-to-be-merged-into-here">Content from cp4d_wds role that needs to be merged into here<a class="headerlink" href="#content-from-cp4d_wds-role-that-needs-to-be-merged-into-here" title="Permanent link"></a></h2>
<h1 id="cp4d_wds">cp4d_wds<a class="headerlink" href="#cp4d_wds" title="Permanent link"></a></h1>
<p>It's only for WDS 4.0.x install on the existing CP4D 4.0.x and WDS instance provisioning, and also generated WDScfg (For Assist Install) related yaml to MAS config Directory.</p>
<p>It's also used for WDScfg (For Assist Install) related yaml preparation if you want to use the existing external WDS instance.</p>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link"></a></h2>
<h3 id="cp4d_username">cp4d_username<a class="headerlink" href="#cp4d_username" title="Permanent link"></a></h3>
<p>The CP4D Admin User name used to call CP4D API to provision Discovery Instance. If you didn't change the initial admin password after CP4D install,you don't need to provide it. And the initial admin user name <code>admin</code> will be used.
- Environment Variable: <code>CP4D_USERNAME</code>
- Default Value: None</p>
<h3 id="cp4d_password">cp4d_password<a class="headerlink" href="#cp4d_password" title="Permanent link"></a></h3>
<p>The CP4D Admin User password to call CP4D API to provision Discovery Instance. If you didn't change the initial admin password after CP4D install, you don't need to provide it.
And the initial admin user password for <code>admin</code> will be used.
- Environment Variable: <code>CP4D_PASSWORD</code>
- Default Value: None</p>
<h3 id="wdschannel">wdschannel<a class="headerlink" href="#wdschannel" title="Permanent link"></a></h3>
<p>The discovery channel used by discovery install. By default the <code>v4.0</code>  will be used as channel name for discovery install.
- Environment Variable: <code>WDS_CHANNEL</code>
- Default Value: v4.0</p>
<h3 id="wdsversion">wdsversion<a class="headerlink" href="#wdsversion" title="Permanent link"></a></h3>
<p>The discovery version used by discovery install. By default the discovery <code>4.0.6</code> version will be installed.
- Environment Variable: <code>WDS_VERSION</code>
- Default Value: 4.0.6</p>
<h3 id="wdsstorageclass">wdsstorageclass<a class="headerlink" href="#wdsstorageclass" title="Permanent link"></a></h3>
<p>The specific storage class for discovery install, if not specified , the storage class used by CP4D will be auto queried in the cluster and used for discovery install.
Usually Watson Discovery uses the following storage classes. If you don't use these storage classes on your cluster, ensure that you have a storage class with an equivalent definition:
OpenShift Container Storage: <code>ocs-storagecluster-ceph-rbd</code>
IBM Cloud OCP cluster: <code>ibmc-block-gold</code>,<code>ibmc-block-gold-gid</code>
IBM Spectrum® Scale Container Native: <code>ibm-spectrum-scale-sc</code>
Portworx: <code>portworx-db-gp2-sc</code></p>
<ul>
<li>Environment Variable: <code>WDS_STORAGE_CLASS</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_instance_id_1">mas_instance_id<a class="headerlink" href="#mas_instance_id_1" title="Permanent link"></a></h3>
<p>The instance ID of Maximo Application Suite that the discovery configuration will target.  If this or <code>mas_config_dir</code> are not set then the role will not generate a discovery template.</p>
<ul>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_workspace_id">mas_workspace_id<a class="headerlink" href="#mas_workspace_id" title="Permanent link"></a></h3>
<p>The workspace ID of Maximo Application Suite that the discovery instance name will be combined as "discovery-assist-{{ mas_workspace_id }}" if you set.
Otherwise, single discovery instance will be created named as "discovery-assist".</p>
<ul>
<li>Environment Variable: <code>MAS_WORKSPACE_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_config_dir_1">mas_config_dir<a class="headerlink" href="#mas_config_dir_1" title="Permanent link"></a></h3>
<p>Local directory to save the generated discovery configuration files.  This can be used to manually configure a Assist instance to connect to the discovery cluster, or used as an input to the <a href="../suite_config/">suite_config</a> role. If this or <code>mas_instance_id</code> are not set then the role will not generate a discovery template.</p>
<ul>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default Value: None</li>
</ul>
<p>If you want to use the existing available external WDS instance(not in the cluster), the below Environment Variables are <code>required</code> to generate the Discovery configuration files. Either is missing will cause the failure to use external Discovery.</p>
<h3 id="assist_wds_url">assist_wds_url<a class="headerlink" href="#assist_wds_url" title="Permanent link"></a></h3>
<p>External Discovery URL for discovery API use
- Environment Variable: <code>ASSIST_WDS_URL</code>
- Default Value: None</p>
<h3 id="assist_wds_admin">assist_wds_admin<a class="headerlink" href="#assist_wds_admin" title="Permanent link"></a></h3>
<p>External Discovery admin User name
- Environment Variable: <code>ASSIST_WDS_ADMIN</code>
- Default Value: None</p>
<h3 id="assist_wds_pass">assist_wds_pass<a class="headerlink" href="#assist_wds_pass" title="Permanent link"></a></h3>
<p>External Discovery admin User password
- Environment Variable: <code>ASSIST_WDS_PASS</code>
- Default Value: None</p>
<h2 id="example-playbook_1">Example Playbook<a class="headerlink" href="#example-playbook_1" title="Permanent link"></a></h2>
<p>WDS install and WDS instance in the OCP Env</p>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    # Create the MAS WDSCfg &amp; Secret resource definitions
    mas_instance_id: &quot;{{ lookup('env', 'MAS_INSTANCE_ID') }}&quot;
    mas_config_dir: &quot;{{ lookup('env', 'MAS_CONFIG_DIR') }}&quot;
  roles:
    - mas.devops.cp4d_wds
</code></pre>
<p>Use External WDS instance in the OCP Env</p>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    #  Use External WDS instance for assist install
    assist_wds_url: &quot;{{ lookup('env', 'ASSIST_WDS_URL') }}&quot;
    assist_wds_admin: &quot;{{ lookup('env', 'ASSIST_WDS_ADMIN') }}&quot;
    assist_wds_pass: &quot;{{ lookup('env', 'ASSIST_WDS_PASS') }}&quot;

    #  Create the MAS WDSCfg &amp; Secret resource definitions
    mas_instance_id: &quot;{{ lookup('env', 'MAS_INSTANCE_ID') }}&quot;
    mas_config_dir: &quot;{{ lookup('env', 'MAS_CONFIG_DIR') }}&quot;
  roles:
    - mas.devops.cp4d_wds
</code></pre>
<h2 id="license_1">License<a class="headerlink" href="#license_1" title="Permanent link"></a></h2>
<p>EPL-2.0</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../cp4d/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cp4d_upgrade/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
