---
# Check common variables
# -----------------------------------------------------------------------------
- name: "Check common variables"
  include_tasks: "{{ role_path }}/../../common_tasks/backup_restore/check_common_vars.yml"


# Check restore variables
# -----------------------------------------------------------------------------
- name: "Fail if masbr_restore_from is not provided"
  assert:
    that: masbr_restore_from is defined and masbr_restore_from != ""
    fail_msg: "masbr_restore_from is required for running restore job"


# Set restore job variables
# -----------------------------------------------------------------------------
- name: "Set fact: restore job variables"
  set_fact:
    masbr_job_type: "restore"
    masbr_job_version: "{{ '%Y%m%d%H%M%S' | strftime }}"

- name: "Set fact: job name"
  set_fact:
    masbr_job_name: "{{ masbr_restore_from }}-{{ masbr_job_version }}"

- name: "Debug: restore job information"
  debug:
    msg:
      - "Restore job name ....................... {{ masbr_job_name }}"
      - "Restore from ........................... {{ masbr_restore_from }}"
